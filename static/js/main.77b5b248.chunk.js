(this["webpackJsonpcovid-slayer"]=this["webpackJsonpcovid-slayer"]||[]).push([[0],{104:function(e,n,t){e.exports=t(131)},131:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(59),l=t.n(c),i=t(7),o=t(75),u=t(24),s=t(5),m=t(3),f=t(2),d=t(14),p=t.n(d),b=t(30),h=t(44),g=t(68),E=t(70),v=t(92),O=t(93),y=t(94),j=t.n(y),w=function(){function e(n){Object(h.a)(this,e),this.baseURL=n,this.client=void 0,this.client=j.a.create({baseURL:n}),this.responseInterceptor()}return Object(O.a)(e,[{key:"responseInterceptor",value:function(){this.client.interceptors.response.use((function(e){return e}),(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("Log errors:",e),Promise.reject(e)}))}}]),e}(),T=t(60),x=new(function(e){Object(E.a)(t,e);var n=Object(g.a)(t);function t(e){var r;return Object(h.a)(this,t),(r=n.call(this,e)).login=function(){var e=Object(b.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(b.a)(p.a.mark((function e(t,a){var c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.client.post("/signin",n);case 3:c=e.sent,l=c.data.accessToken,localStorage.setItem("token",l),t(c.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.getUserFromStorage=function(){try{var e=localStorage.getItem("token");return Object(v.a)(e)}catch(n){return null}},r.getToken=function(){return localStorage.getItem("token")},r.removeToken=function(){localStorage.removeItem("token")},r}return t}(w))(T.mockEndpoint),k=function(e){return{type:"FETCH_AUTH_SUCCESS",payload:e}},S=function(e){return function(){var n=Object(b.a)(p.a.mark((function n(t){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"FETCH_AUTH_START"}),n.prev=1,n.next=4,x.login(e);case 4:n.sent,r=x.getUserFromStorage(),t(k(r)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),t({type:"FETCH_AUTH_FAILURE",payload:"Error logging in..."});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},A=function(){return function(e){x.removeToken(),e({type:"LOGOUT"})}},F=function(){return{isAuthenticated:Object(i.c)((function(e){return e.auth.isAuthenticated})),isFetching:Object(i.c)((function(e){return e.auth.isFetching})),user:Object(i.c)((function(e){return e.auth.user})),errorMessage:Object(i.c)((function(e){return e.auth.errorMessage})),fetchAuth:S,fetchAuthSuccess:k,logout:A}},R="#fff",L="#000",N="#cc0505",U="#af0000",C="#900000",_="#e6e7e8",z="#5e5e5e",M="#373737",H="#28a745";function q(){var e=Object(m.a)(["\n    display: flex;\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n\n    a {\n        display: block;\n        padding: 1rem 1em 1.1rem;\n        color: #fff;\n        text-transform: uppercase;\n\n        &:hover {\n            color: ","\n        }\n    }\n"]);return q=function(){return e},e}var I=f.default.ul(q(),N),G=function(){var e=Object(i.b)(),n=F(),t=n.isAuthenticated,r=n.logout;return a.a.createElement(I,null,a.a.createElement("li",null,a.a.createElement(u.b,{to:"/"},"Game")),t?a.a.createElement("li",null,a.a.createElement(u.b,{to:"/login",onClick:function(n){return function(n){n.preventDefault(),e(r())}(n)}},"Logout")):a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(u.b,{to:"/login"},"Login")),a.a.createElement("li",null,a.a.createElement(u.b,{to:"/register"},"Register"))))},D=function(){var e=Object(i.b)();return{started:Object(i.c)((function(e){return e.game.started})),timeLeft:Object(i.c)((function(e){return e.game.timeLeft})),players:Object(i.c)((function(e){return e.game.players})),start:function(n){e(function(e){return{type:"GAME_STARTED",payload:e}}(n))},setTime:function(){e({type:"SET_GAME_TIME"})},countdown:function(){e({type:"START_COUNTDOWN"})},resetTime:function(){e({type:"RESET_COUNTDOWN"})}}};function P(){var e=Object(m.a)(["\n    padding: 1rem 1em 1.1rem;\n"]);return P=function(){return e},e}var W=f.default.div(P()),B=function(){var e=D(),n=e.started,t=e.timeLeft,c=e.countdown,l=e.resetTime,i=F().isAuthenticated;return Object(r.useEffect)((function(){var e;return n&&t>0&&(e=setTimeout((function(){return c()}),1e3)),function(){clearTimeout(e)}}),[t,n]),Object(r.useEffect)((function(){l()}),[i]),n&&a.a.createElement(W,null,"Time left: ",t)};function J(){var e=Object(m.a)(["    \n    display: flex;\n    justify-content: space-between;\n    margin: 0;\n    padding: 0 1rem;\n    background: ",";\n    color: ",";\n"]);return J=function(){return e},e}var V=f.default.div(J(),M,R),K=function(){var e=F().isAuthenticated;return a.a.createElement(V,null,a.a.createElement(G,null),e&&a.a.createElement(B,null))};function Q(){var e=Object(m.a)(["\n    padding: 4rem 0 0;\n    text-align: center;\n\n    h1 {\n        margin: 0 0 4rem;\n        color: #fff;\n        font-weight: 500;\n        letter-spacing: 0.1rem;\n        text-shadow: 0.1rem 0.1rem 0 rgba(0, 0, 0, 0.7);\n    }\n"]);return Q=function(){return e},e}var X=f.default.header(Q()),Y=function(){return a.a.createElement(X,null,a.a.createElement("h1",null,"Covid Slayer"),a.a.createElement(K,null))},Z=t(103),$=function(e){var n=e.component,t=Object(Z.a)(e,["component"]),r=F().isAuthenticated;return a.a.createElement(s.b,t,r?a.a.createElement(n,null):a.a.createElement(s.a,{to:{pathname:"/login",state:{referrer:t.path}}}))},ee=t(98);function ne(){var e=Object(m.a)(["\n    *,\n    *::before,\n    *::after {\n        box-sizing: border-box;\n    }\n\n    html {\n        height: 100%;\n        font-size: 62.5%;\n    }\n\n    body {\n        height: 100%;\n        min-width: 100%;\n        margin: 0;\n        padding: 0;\n        background: ",";\n        color: ",';\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;\n        font-size: 16px;\n        font-weight: normal;\n        line-height: 1.8rem;\n        text-decoration: none;\n        -webkit-text-size-adjust: 100%;\n        word-wrap: break-word;\n    }\n\n    // Links\n    a {\n        transition: color 0.3s, background-color 0.3s;\n        color: ',";\n        text-decoration: none;\n    }\n\n    a:hover {\n        color: ",";\n        text-decoration: none;\n    }\n\n    a:focus {\n        outline: none;\n    }\n\n    a:active,\n    a:hover {\n        outline: 0;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n        color: ",';\n        font-weight: normal;\n\n    }\n\n    h1 {\n        font-size: "2rem";\n    }\n\n    h2 {\n        font-size: "1.8rem";\n    }\n\n    h3 {\n        font-size: "1.8rem";\n    }\n\n    h4 {\n        font-size: "1.6rem";\n    }\n\n    h5 {\n        font-size: "1.6rem";\n    }\n\n    h6 {\n        font-size: "1.6rem";\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6,\n    p,\n    ul,\n    ol,\n    table,\n    dl,\n    form,\n    menu {\n        margin: 0 0 3rem;\n    }\n\n    ul {\n        padding-left: 1.5rem;\n    }\n\n    ol {\n        padding-left: 2.2rem;\n    }\n\n    blockquote {\n        padding-left: 5rem;\n        background-size: 1.8rem auto;\n        font-size: 1.7rem;\n        line-height: 2.4rem;\n    }\n\n    html,\n    button,\n    input,\n    select,\n    textarea {\n        color: #5e5e5e;\n    }\n\n    // A better looking default horizontal rule\n    hr {\n        display: block;\n        height: 0.1rem;\n        margin: 3.5rem 0;\n        padding: 0;\n        border: 0;\n        border-top: 0.1rem solid ',";\n    }\n\n    // Remove the gap between images and the bottom of their containers\n    img {\n        max-width: 100%;\n        height: auto;\n        vertical-align: middle;\n    }\n\n    // Remove default fieldset styles\n    fieldset {\n        margin: 0;\n        padding: 0;\n        border: 0;\n    }\n\n    // Allow only vertical resizing of textareas\n    textarea {\n        resize: vertical;\n    }\n\n    pre {\n        white-space: pre-wrap;\n        background-color: #fff;\n        padding: 2rem;\n        border-radius: 0.5rem;\n        border: 0.1rem solid #ccc;\n        color: #333;\n    }\n"]);return ne=function(){return e},e}var te=Object(f.css)(ne(),_,M,U,C,L,z);function re(){var e=Object(m.a)(["\n\tbody {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n    #root {\n        width: 50rem;\n        background: ",";\n        box-shadow: 0 0 0.5rem rgba(0, 0, 0, .2);\n    }\n\n    main {\n        padding: 3rem;\n        background: ",";\n        color: ",";\n    }\n"]);return re=function(){return e},e}var ae=Object(f.css)(re(),U,R,M);function ce(){var e=Object(m.a)(["\n    ","\n    ","\n    ","\n"]);return ce=function(){return e},e}var le=Object(f.createGlobalStyle)(ce(),ee.normalize,te,ae);function ie(){var e=Object(m.a)(["\n    display: flex;\n    width: 100%;\n\n    div {\n        width: 100%;\n        text-align: center;\n    }\n"]);return ie=function(){return e},e}var oe=f.default.section(ie()),ue=function(){var e=F().user;return a.a.createElement(oe,null,a.a.createElement("div",null,a.a.createElement("h2",null,e.email),a.a.createElement("progress",{id:"file",max:"100",value:"70"},"70%")),a.a.createElement("div",null,a.a.createElement("h2",null,"Player 2"),a.a.createElement("progress",{id:"file",max:"100",value:"100"},"100%")))};function se(){var e=Object(m.a)(["\n    display: flex;\n    height: 20rem;\n    align-items: center;\n    justify-content: center;\n\n    button {\n        padding: 1rem 2rem;\n    }\n"]);return se=function(){return e},e}var me=f.default.section(se()),fe=function(){var e=D();return a.a.createElement(me,null,!e.started&&a.a.createElement("button",{onClick:function(){return e.start(100)}},"Start"),e.started&&a.a.createElement("h3",null,"Game is started"))};function de(){var e=Object(m.a)(["\n    ul {\n        display: flex;\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n    }\n\n    li {\n        width: 100%;\n        padding: 0 1rem;\n    }\n\n    button {\n        width: 100%;\n    }\n"]);return de=function(){return e},e}var pe=f.default.footer(de()),be=function(){return D().started&&a.a.createElement(pe,null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("button",{type:"button"},"Attack")),a.a.createElement("li",null,a.a.createElement("button",{type:"button"},"Blast")),a.a.createElement("li",null,a.a.createElement("button",{type:"button"},"Heal")),a.a.createElement("li",null,a.a.createElement("button",{type:"button"},"Give Up"))))},he=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ue,null),a.a.createElement(fe,null),a.a.createElement(be,null))},ge=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(he,null))},Ee=t(11),ve=t(28);function Oe(){var e=Object(m.a)(["\n    overflow: hidden;\n    margin-bottom: 2rem;\n\n    select,\n    input {\n        display: block;\n        width: 100%;\n        padding: 0.8rem 1rem;\n    }\n\n    // Disabled inputs/select\n    input[disabled],\n    select[disabled],\n    textarea[disabled] {\n        opacity: 0.6;\n    }\n\n    .error-message {\n        padding: 0.5rem 2rem;\n        color: ",";\n        background: ",";\n        font-size: 1.4rem;\n    }\n"]);return Oe=function(){return e},e}var ye=f.default.div(Oe(),R,U);function je(){var e=Object(m.a)(["\n    margin-bottom: 1rem;\n    text-align: center;\n    font-size: 1.8rem;\n    color:  ",";\n"]);return je=function(){return e},e}var we=f.default.div(je(),(function(e){return function(e){switch(e){case"success":return H;default:return U}}(e.variant)})),Te=function(e){var n=e.variant,t=e.children;return t?a.a.createElement(we,{variant:n},t):null},xe=ve.a().shape({email:ve.b().email().required("Required"),password:ve.b().min(6).required("Required")}),ke=function(){var e=Object(i.b)(),n=Object(s.g)(),t=F(),c=t.isAuthenticated,l=t.fetchAuth,o=t.errorMessage,u=Object(r.useRef)(null);return Object(r.useEffect)((function(){c&&n.push("/"),u&&u.current&&u.current.focus()}),[c,n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Te,null,o),a.a.createElement(Ee.d,{initialValues:{email:"",password:""},validationSchema:xe,onSubmit:function(n,t){var r=t.setSubmitting;e(l(n)),r(!1)}},(function(e){var n=e.isSubmitting;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee.c,null,a.a.createElement(ye,null,a.a.createElement(Ee.b,{type:"text",name:"email",innerRef:u,autoComplete:"off"}),a.a.createElement(Ee.a,{name:"email",component:"div",className:"error-message"})),a.a.createElement(ye,null,a.a.createElement(Ee.b,{type:"password",name:"password",autoComplete:"off"}),a.a.createElement(Ee.a,{name:"password",component:"div",className:"error-message"})),a.a.createElement("button",{type:"submit",disabled:n},"Login")))})))},Se=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Login"),a.a.createElement(ke,null))},Ae=t(102),Fe=new(function(e){Object(E.a)(t,e);var n=Object(g.a)(t);function t(e){var r;return Object(h.a)(this,t),(r=n.call(this,e)).register=function(e){return new Promise(function(){var n=Object(b.a)(p.a.mark((function n(t,a){var c,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.client.post("/register",e);case 3:c=n.sent,l=c.data.accessToken,localStorage.setItem("token",l),t(c.data),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}())},r}return t}(w))(T.mockEndpoint),Re=ve.a().shape({firstName:ve.b().required("Required"),lastName:ve.b().required("Required"),email:ve.b().email().required("Required"),password:ve.b().min(6).required("Required")}),Le=function(){Object(i.b)();var e=Object(s.g)(),n=F(),t=n.isAuthenticated,c=(n.fetchAuth,Object(r.useRef)(null)),l=Object(r.useState)(null),o=Object(Ae.a)(l,2),u=o[0],m=o[1],f=function(){var e=Object(b.a)(p.a.mark((function e(n,t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.setSubmitting,e.prev=1,e.next=4,Fe.register(n);case 4:e.sent,m({message:"Registration successful!",variant:"success"}),r(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),c=e.t0,a=c.response&&c.response.data||c.message,m({message:a}),r(!1);case 14:case"end":return e.stop()}var c}),e,null,[[1,9]])})));return function(n,t){return e.apply(this,arguments)}}();return setTimeout((function(){return m(null)}),4e3),Object(r.useEffect)((function(){t&&e.push("/"),c&&c.current&&c.current.focus()}),[t,e]),a.a.createElement(a.a.Fragment,null,u&&a.a.createElement(Te,{variant:u.variant},u.message),a.a.createElement(Ee.d,{initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:Re,onSubmit:f},(function(e){var n=e.isSubmitting;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee.c,null,a.a.createElement(ye,null,a.a.createElement(Ee.b,{type:"text",name:"firstName",innerRef:c,placeholder:"First Name",autoComplete:"off"}),a.a.createElement(Ee.a,{name:"firstName",component:"div",className:"error-message"})),a.a.createElement(ye,null,a.a.createElement(Ee.b,{type:"text",name:"lastName",placeholder:"Last Name",autoComplete:"off"}),a.a.createElement(Ee.a,{name:"lastName",component:"div",className:"error-message"})),a.a.createElement(ye,null,a.a.createElement(Ee.b,{type:"text",name:"email",placeholder:"Email Address",autoComplete:"off"}),a.a.createElement(Ee.a,{name:"email",component:"div",className:"error-message"})),a.a.createElement(ye,null,a.a.createElement(Ee.b,{type:"password",name:"password",placeholder:"Password",autoComplete:"off"}),a.a.createElement(Ee.a,{name:"password",component:"div",className:"error-message"})),a.a.createElement("button",{type:"submit",disabled:n},"Login")))})))},Ne=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Register"),a.a.createElement(Le,null))};var Ue=function(){var e=F(),n=e.isAuthenticated,t=e.fetchAuthSuccess,c=Object(i.b)();return Object(r.useEffect)((function(){if(!n){var e=x.getUserFromStorage();e&&c(t(e))}}),[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Y,null),a.a.createElement("main",null,a.a.createElement(s.d,null,a.a.createElement($,{exact:!0,path:"/",component:ge}),a.a.createElement(s.b,{path:"/login",component:Se,exact:!0}),a.a.createElement(s.b,{path:"/register",component:Ne,exact:!0}))),a.a.createElement(le,null))},Ce=t(16),_e=t(29),ze={isAuthenticated:!1,isFetching:!0,isFetched:!1,user:null,errorMessage:void 0},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FETCH_AUTH_START":return Object(_e.a)({},e,{isFetching:!0});case"FETCH_AUTH_SUCCESS":return Object(_e.a)({},e,{user:n.payload,isFetching:!1,isFetched:!0,isAuthenticated:!0,errorMessage:void 0});case"LOGOUT":case"FETCH_AUTH_FAILURE":return Object(_e.a)({},e,{isAuthenticated:!1,isFetching:!1,isFetched:!1,user:null,errorMessage:n.payload});default:return e}},He={started:!1,configuredTimeLeft:null,timeLeft:60,players:{first:{health:100,surrendered:!1},second:{health:100,surrendered:!1}}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GAME_STARTED":return Object(_e.a)({},e,{configuredTimeLeft:n.payload,timeLeft:n.payload||He.timeLeft,started:!0});case"SET_GAME_TIME":return Object(_e.a)({},e,{timeLeft:n.payload});case"START_COUNTDOWN":return Object(_e.a)({},e,{timeLeft:e.timeLeft-1});case"RESET_COUNTDOWN":return Object(_e.a)({},e,{timeLeft:e.configuredTimeLeft||He.timeLeft});case"SURRENDER_GAME":return Object(_e.a)({},e,{started:!1,player:n.payload});default:return e}},Ie=Object(Ce.c)({auth:Me,game:qe}),Ge=Object(o.a)({reducer:Ie});l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,{store:Ge},a.a.createElement(u.a,null,a.a.createElement(Ue,null)))),document.getElementById("root"))},60:function(e){e.exports=JSON.parse('{"mockEndpoint":"http://localhost:3015"}')}},[[104,1,2]]]);
//# sourceMappingURL=main.77b5b248.chunk.js.map